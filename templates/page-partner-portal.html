<!-- wp:template-part {"slug":"header","tagName":"header"} /-->

<!-- wp:group {"tagName":"main","style":{"spacing":{"padding":{"top":"4rem","bottom":"4rem"}}},"backgroundColor":"light","layout":{"type":"constrained"}} -->
<main class="wp-block-group has-light-background-color has-background" style="padding-top:4rem;padding-bottom:4rem">

    <!-- wp:heading {"textAlign":"center","style":{"spacing":{"margin":{"bottom":"1rem"}}},"fontSize":"xx-large"} -->
    <h1 class="wp-block-heading has-text-align-center has-xx-large-font-size htb-gradient-text" style="margin-bottom:1rem;font-size:3rem;font-weight:700">Partner Portal</h1>
    <!-- /wp:heading -->

    <!-- wp:paragraph {"align":"center","style":{"color":{"text":"#2D6A4F"},"spacing":{"margin":{"bottom":"3rem"}}}} -->
    <p class="has-text-align-center has-text-color" style="color:#2D6A4F;margin-bottom:3rem">B2B Partner Dashboard &amp; API Access</p>
    <!-- /wp:paragraph -->

    <!-- wp:html -->
    <div id="partner-portal-app" style="max-width:1200px;margin:0 auto;padding:0 2rem;">
        <div style="background:white;border-radius:16px;padding:3rem;box-shadow:0 4px 20px rgba(0,0,0,0.08);">

            <!-- API Registration Form -->
            <div id="registration-section">
                <h2 style="color:#1B4332;margin-bottom:1.5rem;">Partner Registration</h2>
                <p style="margin-bottom:2rem;color:#1e293b;">Complete this form to register for API access. Your application will be reviewed and you'll receive API credentials once approved.</p>

                <form id="partner-registration-form" style="display:grid;gap:1.5rem;">
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;">
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">Business Name *</label>
                            <input type="text" name="business_name" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                        </div>
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">Contact Name *</label>
                            <input type="text" name="contact_name" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                        </div>
                    </div>

                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;">
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">Email *</label>
                            <input type="email" name="email" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                        </div>
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">Phone *</label>
                            <input type="tel" name="phone" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                        </div>
                    </div>

                    <div>
                        <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">Address *</label>
                        <input type="text" name="address" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                    </div>

                    <div style="display:grid;grid-template-columns:2fr 1fr 1fr;gap:1.5rem;">
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">City *</label>
                            <input type="text" name="city" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                        </div>
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">State *</label>
                            <input type="text" name="state" value="AR" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                        </div>
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">ZIP *</label>
                            <input type="text" name="zip" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                        </div>
                    </div>

                    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:1.5rem;">
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">License Number *</label>
                            <input type="text" name="license_number" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                        </div>
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">License Type *</label>
                            <select name="license_type" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;">
                                <option value="">Select...</option>
                                <option value="dispensary">Dispensary</option>
                                <option value="cultivator">Cultivator</option>
                                <option value="processor">Processor</option>
                            </select>
                        </div>
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">EIN *</label>
                            <input type="text" name="ein" required style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;" placeholder="XX-XXXXXXX">
                        </div>
                    </div>

                    <div>
                        <label style="display:block;font-weight:600;margin-bottom:0.5rem;color:#1B4332;">BioTrack License (Optional)</label>
                        <input type="text" name="biotrack_license" style="width:100%;padding:0.75rem;border:1px solid #2D6A4F;border-radius:8px;" placeholder="Your BioTrack license if different">
                    </div>

                    <div style="margin-top:1rem;">
                        <button type="submit" style="background:linear-gradient(135deg,#1B4332,#2D6A4F,#D4A574);color:white;border:none;border-radius:8px;padding:1rem 2rem;font-weight:700;cursor:pointer;transition:all 0.3s ease;">
                            Submit Registration
                        </button>
                    </div>
                </form>

                <div id="registration-message" style="display:none;margin-top:2rem;padding:1.5rem;border-radius:8px;"></div>
            </div>

            <!-- Quick Links -->
            <div style="margin-top:3rem;padding-top:3rem;border-top:2px solid #e5e7eb;">
                <h3 style="color:#1B4332;margin-bottom:1rem;">Developer Resources</h3>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;">
                    <a href="/api-docs/" style="padding:1.5rem;background:#f8fafc;border-radius:8px;text-decoration:none;color:#1B4332;border:1px solid #e5e7eb;transition:all 0.3s ease;">
                        <strong style="display:block;margin-bottom:0.5rem;color:#2D6A4F;">üìö API Documentation</strong>
                        Complete API reference and code examples
                    </a>
                    <a href="/contact/" style="padding:1.5rem;background:#f8fafc;border-radius:8px;text-decoration:none;color:#1B4332;border:1px solid #e5e7eb;transition:all 0.3s ease;">
                        <strong style="display:block;margin-bottom:0.5rem;color:#2D6A4F;">‚úâÔ∏è Contact Support</strong>
                        Questions? Contact our B2B team
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.getElementById('partner-registration-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const formData = new FormData(e.target);
        const data = Object.fromEntries(formData.entries());

        const messageDiv = document.getElementById('registration-message');
        messageDiv.style.display = 'none';

        try {
            const response = await fetch('/wp-json/happyturtle/v1/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();

            if (result.success) {
                messageDiv.style.backgroundColor = '#d4edda';
                messageDiv.style.color = '#155724';
                messageDiv.style.border = '1px solid #c3e6cb';
                messageDiv.innerHTML = '<strong>Success!</strong> ' + result.message;
                e.target.reset();
            } else {
                throw new Error(result.message || 'Registration failed');
            }

            messageDiv.style.display = 'block';
        } catch (error) {
            messageDiv.style.backgroundColor = '#f8d7da';
            messageDiv.style.color = '#721c24';
            messageDiv.style.border = '1px solid #f5c6cb';
            messageDiv.innerHTML = '<strong>Error:</strong> ' + error.message;
            messageDiv.style.display = 'block';
        }
    });
    </script>
    <!-- /wp:html -->

</main>
<!-- /wp:group -->

<!-- wp:template-part {"slug":"footer","tagName":"footer"} /-->
